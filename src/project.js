window.__require=function t(i,e,o){function l(n,r){if(!e[n]){if(!i[n]){var h=n.split("/");if(h=h[h.length-1],!i[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+n+"'")}}var u=e[n]={exports:{}};i[n][0].call(u.exports,function(t){return l(i[n][1][t]||t)},u,u.exports,t,i,e,o)}return e[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<o.length;n++)l(o[n]);return l}({AudioManager:[function(t,i,e){"use strict";cc._RF.push(i,"5db286Wa9lHDLKVjBJ6u6Jn","AudioManager"),cc.Class({extends:cc.Component,properties:{metal_audioSource:{type:cc.AudioSource,default:null},spinning_audioSource:{type:cc.AudioSource,default:null},winSound_audioSource:{type:cc.AudioSource,default:null}},start:function(){},playMetal:function(){this.metal_audioSource.play()},playSpinning:function(){this.spinning_audioSource.play()},pauseSpinning:function(){this.spinning_audioSource.pause()},playWinSound:function(){this.winSound_audioSource.play()}}),cc._RF.pop()},{}],Test:[function(t,i,e){"use strict";cc._RF.push(i,"298f6OM00hO2L7yDug2JvCO","Test");var o=t("slot.Roller"),l=t("AudioManager");cc.Class({extends:cc.Component,properties:{audioManager:{type:l,default:null},rewardNum:{type:cc.EditBox,default:null},isStart:!1,isShowRewardResult:!1},onLoad:function(){},spin:function(){this.isShowRewardResult||(this.isStart=!this.isStart,this.node.getComponentsInChildren(o).forEach(function(t,i,e){t.toggleSpin()}),cc.log("this.isStart"+this.isStart),this.isStart?this.audioManager.playSpinning():this.audioManager.pauseSpinning(),this.w_spin())},w_spin:function(){if(this.isStart){if(!this.isShowRewardResult){this.isShowRewardResult=!0;var t=this.node.getComponentsInChildren(o),i=this.rewardNum.string.split("");console.log("res = "+i.length),console.log("res 0  = "+i[0]),console.log("res 0  = "+i[1]),console.log("res 0  = "+i[2]),console.log("res 0  = "+i[3]),console.log("res 0  = "+i[4]),setTimeout(function(){t[0].toggleSpin(parseInt(i[4])),this.audioManager.playMetal()}.bind(this),3e3),setTimeout(function(){t[1].toggleSpin(parseInt(i[3])),this.audioManager.playMetal()}.bind(this),4e3),setTimeout(function(){t[2].toggleSpin(parseInt(i[2])),this.audioManager.playMetal()}.bind(this),5e3),setTimeout(function(){t[3].toggleSpin(parseInt(i[1])),this.audioManager.playMetal()}.bind(this),6e3),setTimeout(function(){t[4].toggleSpin(parseInt(i[0])),this.audioManager.playMetal(),this.audioManager.playWinSound(),this.audioManager.pauseSpinning(),this.isShowRewardResult=!1,this.isStart=!this.isStart}.bind(this),7500)}}else cc.log("Roulette has not yet rolled! this.isStart = "+this.isStart)}}),cc._RF.pop()},{AudioManager:"AudioManager","slot.Roller":"slot.Roller"}],"slot.Roller":[function(t,i,e){"use strict";cc._RF.push(i,"6dec3JbzbtEYKHs5mCVQKs1","slot.Roller");var o=t("slot.Symbol");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,executeInEditMode:!0},properties:{_rollerRows:0,rollerRows:{get:function(){return this._rollerRows},set:function(t){this._rollerRows=t,this._createSymbols()},min:0,step:1},_rollerWidth:180,rollerWidth:{get:function(){return this._rollerWidth},set:function(t){this._rollerWidth=t,this._updateScroller()},min:0,step:1},_rollerHeight:540,rollerHeight:{get:function(){return this._rollerHeight},set:function(t){this._rollerHeight=t,this._updateScroller()},min:0,step:1},rollerScrollRate:{default:1,min:.1,max:2,step:.05,slide:!0},_rollerSymbolResult:[],rollerSymbolResult:{get:function(){return this._rollerSymbolResult},set:function(t){this._rollerSymbolResult=t;for(var i,e,l=this._scroller.getComponentsInChildren(o),s=0;s<l.length-1;s++)e=l[s+1],i=parseInt(this._rollerSymbolResult[s]),isNaN(i)||i<0?e.randomSymbol():e.symbolIndex=i}},_symbolWidth:180,symbolWidth:{get:function(){return this._symbolWidth},set:function(t){this._symbolWidth=t,this.rollerWidth=this._symbolWidth,this._updateSymbolSize()},min:0,step:1},_symbolHeight:180,symbolHeight:{get:function(){return this._symbolHeight},set:function(t){this._symbolHeight=t,this._updateSymbolSize()},min:0,step:1},symbolEmptySF:{default:null,type:cc.SpriteFrame,notify:function(){this._updateSymbolSpriteFrame()}},symbolRollSF:[cc.SpriteFrame],symbolBlurSF:[cc.SpriteFrame],_doScrollling:!1,_isScrolling:!1,isSpinning:{readonly:!0,get:function(){return 1==this._doScrollling||1==this._isScrolling}}},onLoad:function(){this._scroller=this.node.getChildByName("scroller")||new cc.Node,this._scroller.name="scroller",this._scroller.removeFromParent(!1),this.node.addChild(this._scroller);this._scroller.getComponent(cc.Mask)||this._scroller.addComponent(cc.Mask);this._updateScroller(),this._updateSymbolSize(),this._updateSymbolSpriteFrame(),this._customRollerResult=[]},setRollerSize:function(t,i){this._rollerWidth=t,this._rollerHeight=i,this._updateScroller()},_updateScroller:function(){this.node.width=this._scroller.width=this.rollerWidth,this.node.height=this._scroller.height=this.rollerHeight},_createSymbols:function(){if(this._scroller.removeAllChildren(),this.rollerRows>0){for(var t,i=0;i<this.rollerRows+1;i++)(t=new cc.Node).name="symbol_"+i,t.addComponent(o),this._scroller.addChild(t);this._updateSymbolSize(),this._updateSymbolSpriteFrame()}},_updateSymbolSize:function(){var t=this._scroller.getComponentsInChildren(o);this._rollerTopBound=this.symbolHeight*(this.rollerRows+1)/2,this._rollerBottomBound=-this.symbolHeight*(this.rollerRows+1)/2,t.forEach(function(t,i,e){t.symbolWidth=this.symbolWidth,t.symbolHeight=this.symbolHeight,t.node.y=this._rollerTopBound-t.symbolHeight*i},this),this.rollerHeight=this.symbolHeight*this.rollerRows},_updateSymbolSpriteFrame:function(){this._scroller.getComponentsInChildren(o).forEach(function(t,i,e){t.isBlur=!1,t.symbolEmptySF=this.symbolEmptySF,t.symbolRollSF=this.symbolRollSF,t.symbolBlurSF=this.symbolBlurSF},this)},setSymbolSize:function(t,i){this._symbolWidth=t,this._symbolHeight=i,this._updateSymbolSize()},update:function(t){var i=Math.ceil(.15*this.symbolHeight*this.rollerScrollRate);this._isScrolling&&(this._scroller.getComponentsInChildren(o).forEach(function(t,e,o){var l=t.node.y-i;l<this._rollerBottomBound&&(this._doScrollling||this._rollerSymbolResult.length<this.rollerRows?(t.randomSymbol(),this._rollerSymbolResult.unshift(t.symbolIndex)):this._customRollerResult.length>0?(t.symbolIndex=this._customRollerResult.pop(),this._rollerSymbolResult.unshift(t.symbolIndex)):this._isScrolling=!1,l=this._rollerTopBound-(this._rollerBottomBound-l)),t.node.y=l},this),0==this._isScrolling&&(this._rollerSymbolResult=this._rollerSymbolResult.slice(0,this.rollerRows),this._readyStopSpin()))},_readyStartSpin:function(){this._scroller.getComponentsInChildren(o).forEach(function(t,i,e){var o=Math.ceil(.2*this.symbolHeight*this.rollerScrollRate),l=cc.sequence(cc.moveBy(.1,0,o),cc.callFunc(function(){t.isBlur=!0,t.node.y=Math.ceil(t.node.y),i==e.length-1&&(this._isScrolling=!0)},this));t.node.runAction(l)},this)},_readyStopSpin:function(){this._scroller.getComponentsInChildren(o).forEach(function(t,i,e){var o=this._rollerBottomBound-t.node.y,l=t.symbolHeight-Math.abs(Math.ceil(o%t.symbolHeight)),s=cc.sequence(cc.moveBy(.05,0,l),cc.callFunc(function(){t.isBlur=!1,t.node.y=Math.ceil(t.node.y),i==e.length-1&&(cc.log("Final Result:",this._rollerSymbolResult),this._doScrollling=!1)},this));t.node.runAction(s)},this)},_startSpin:function(){this._doScrollling=!0,this._rollerSymbolResult=[],this._readyStartSpin()},_stopSpin:function(){this._doScrollling=!1},spin:function(){this._doScrollling||this._isScrolling||this._startSpin()},stop:function(t){this._doScrollling&&this._isScrolling&&(this._customRollerResult=t||[],this._stopSpin())},toggleSpin:function(t){this.isSpinning?this.stop([t]):this.spin()}});cc._RF.pop()},{"slot.Symbol":"slot.Symbol"}],"slot.Symbol":[function(t,i,e){"use strict";var o;function l(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}cc._RF.push(i,"26f65S90H9KtYMdipUy38Ht","slot.Symbol");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,executeInEditMode:!0},properties:(o={_symbolIndex:0,symbolIndex:{get:function(){return this._symbolIndex},set:function(t){var i=t%this.symbolRollSF.length;this._symbolIndex=isNaN(i)?t:i,this.isBlur=this.isBlur},min:0,step:1},_isBlur:!1,isBlur:{get:function(){return this._isBlur},set:function(t){this._isBlur=t,this._isBlur&&this.symbolBlurSF[this._symbolIndex]?this._sprite.spriteFrame=this.symbolBlurSF[this._symbolIndex]:this.symbolRollSF[this._symbolIndex]?this._sprite.spriteFrame=this.symbolRollSF[this._symbolIndex]:this._sprite.spriteFrame=this.symbolEmptySF}},_symbolWidth:120,symbolWidth:{get:function(){return this.node.width},set:function(t){this.node.width=t},min:0,step:1},_symbolHeight:120,symbolHeight:{get:function(){return this.node.height},set:function(t){this.node.height=t},min:0,step:1}},l(o,"_isBlur",!1),l(o,"symbolEmptySF",{default:null,type:cc.SpriteFrame,notify:function(){this.emptySymbol()}}),l(o,"symbolRollSF",[cc.SpriteFrame]),l(o,"symbolBlurSF",[cc.SpriteFrame]),o),onLoad:function(){this.node.anchorX=.5,this.node.anchorY=.5;var t=this.node.getChildByName("symbolSprite")||new cc.Node;t.name="symbolSprite",t.removeFromParent(!1),this.node.addChild(t),this._sprite=t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite),this._sprite.type=0,this._sprite.sizeMode=cc.Sprite.SizeMode.RAW,this._sprite.trim=!1},randomSymbol:function(){var t=Math.floor(this.symbolRollSF.length*Math.random());this.symbolIndex=t},emptySymbol:function(){this._sprite.spriteFrame=this.symbolEmptySF}});cc._RF.pop()},{}]},{},["AudioManager","Test","slot.Roller","slot.Symbol"]);